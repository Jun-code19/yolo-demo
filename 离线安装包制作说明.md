# YOLOé¡¹ç›®ç¦»çº¿å®‰è£…åŒ…åˆ¶ä½œæŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—æä¾›äº†ä¸‰ç§åˆ¶ä½œYOLOé¡¹ç›®ç¦»çº¿å®‰è£…åŒ…çš„æ–¹æ¡ˆï¼Œè§£å†³åœ¨çº¿æ‹‰å–ç¯å¢ƒç¼“æ…¢çš„é—®é¢˜ã€‚

## ğŸ¯ æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å®‰è£…åŒ…å¤§å° |
|------|----------|------|------|------------|
| **æ–¹æ¡ˆä¸€ï¼šDockeré•œåƒåŒ…** | å®Œå…¨ç¦»çº¿ç¯å¢ƒ | ç®€å•å¿«é€Ÿï¼Œä¸€é”®å®‰è£… | åŒ…ä½“ç§¯è¾ƒå¤§ | ~3-5GB |
| **æ–¹æ¡ˆäºŒï¼šPythonä¾èµ–åŒ…** | æœ‰Pythonç¯å¢ƒ | åŒ…ä½“ç§¯å°ï¼Œä¾èµ–æ˜ç¡® | éœ€è¦é…ç½®ç¯å¢ƒ | ~500MB |
| **æ–¹æ¡ˆä¸‰ï¼šå®Œæ•´ç¦»çº¿åŒ…** | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½² | åŠŸèƒ½å®Œæ•´ï¼Œç®¡ç†ä¾¿æ· | åŒ…ä½“ç§¯æœ€å¤§ | ~5-8GB |

## ğŸ“‹ å‘½åè§„èŒƒ

æ‰€æœ‰ç¦»çº¿åŒ…ä½¿ç”¨ç»Ÿä¸€çš„å‘½åæ ¼å¼ï¼Œé¿å…ä¸­æ–‡å­—ç¬¦ï¼š

| åŒ…ç±»å‹ | å‘½åæ ¼å¼ | ç¤ºä¾‹ |
|--------|----------|------|
| **Windowsç¦»çº¿åŒ…** | `yolo-demo-offline_YYYYMMDD_HHMMSS` | `yolo-demo-offline_20241219_153000` |
| **Linux x64ç¦»çº¿åŒ…** | `yolo-linux-x64-offline_YYYYMMDD_HHMMSS` | `yolo-linux-x64-offline_20241219_153000` |
| **å‹ç¼©åŒ…** | `{åŒ…å}.tar.gz` | `yolo-linux-x64-offline_20241219_153000.tar.gz` |

**ä¼˜ç‚¹**ï¼š
- âœ… çº¯è‹±æ–‡+æ•°å­—ï¼Œå…¼å®¹æ‰€æœ‰æ“ä½œç³»ç»Ÿ
- âœ… åŒ…å«å®Œæ•´æ—¶é—´æˆ³ï¼Œä¾¿äºç‰ˆæœ¬ç®¡ç†
- âœ… æ ¼å¼ç»Ÿä¸€ï¼Œæ˜“äºè‡ªåŠ¨åŒ–å¤„ç†

## ğŸš€ æ–¹æ¡ˆä¸€ï¼šDockeré•œåƒç¦»çº¿åŒ…ï¼ˆæ¨èï¼‰

### åˆ¶ä½œæ­¥éª¤

#### Windowsç¯å¢ƒï¼š
```batch
# è¿è¡Œåˆ¶ä½œè„šæœ¬
create_offline_package.bat
```

#### Linux/macOSç¯å¢ƒï¼š
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x create_offline_package.sh

# è¿è¡Œåˆ¶ä½œè„šæœ¬
./create_offline_package.sh
```

### ä½¿ç”¨æ–¹æ³•

1. **è§£å‹å®‰è£…åŒ…**
   ```bash
   tar -xzf yolo-demo-offline_*.tar.gz
   cd yolo-demo-offline_*
   ```

2. **è¿è¡Œå®‰è£…**
   - Windows: åŒå‡» `install.bat`
   - Linux/macOS: `./install.sh`

3. **è®¿é—®æœåŠ¡**
   - å‰ç«¯ï¼šhttp://localhost
   - APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs

## ğŸ æ–¹æ¡ˆäºŒï¼šPythonä¾èµ–ç¦»çº¿åŒ…

### åˆ¶ä½œæ­¥éª¤

```bash
# è¿è¡ŒPythonä¾èµ–ä¸‹è½½è„šæœ¬
./create_pip_offline.sh
```

### ä½¿ç”¨æ–¹æ³•

1. **è§£å‹ä¾èµ–åŒ…**
   ```bash
   tar -xzf python_packages_offline.tar.gz
   cd offline_packages
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   ./install_packages.sh
   ```

3. **æ‰‹åŠ¨éƒ¨ç½²é¡¹ç›®**
   ```bash
   # å¤åˆ¶é¡¹ç›®æ–‡ä»¶
   # é…ç½®æ•°æ®åº“
   # å¯åŠ¨æœåŠ¡
   ```

## ğŸª æ–¹æ¡ˆä¸‰ï¼šå®Œæ•´ç¦»çº¿åŒ…

### åˆ¶ä½œæ­¥éª¤

```bash
# è¿è¡Œå®Œæ•´æ‰“åŒ…è„šæœ¬
./make_complete_offline_package.sh
```

### ä½¿ç”¨æ–¹æ³•

1. **ä¸€é”®å®‰è£…**
   ```bash
   tar -xzf yolo-complete-offline_*.tar.gz
   cd yolo-complete-offline_*
   ./install_all.sh
   ```

2. **é…ç½®é¡¹ç›®**
   ```bash
   ./configure.sh
   ```

3. **æ—¥å¸¸ç®¡ç†**
   ```bash
   ./manage.sh start    # å¯åŠ¨
   ./manage.sh stop     # åœæ­¢
   ./manage.sh status   # çŠ¶æ€
   ./manage.sh logs     # æ—¥å¿—
   ./manage.sh backup   # å¤‡ä»½
   ```

## ğŸ”§ åˆ¶ä½œç¯å¢ƒè¦æ±‚

### åŸºç¡€ç¯å¢ƒ
- **Docker** 20.10+
- **Docker Compose** 1.29+
- **Python** 3.10+ (æ–¹æ¡ˆäºŒéœ€è¦)
- **Node.js** 18+ (æ–¹æ¡ˆä¸‰éœ€è¦)

### ç³»ç»Ÿèµ„æº
- **å†…å­˜**: 8GB+ (åˆ¶ä½œæ—¶)
- **ç£ç›˜**: 20GB+ å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: é¦–æ¬¡åˆ¶ä½œéœ€è¦ç½‘ç»œä¸‹è½½ä¾èµ–

## ğŸ“¦ åˆ¶ä½œå‰å‡†å¤‡

### 1. æ£€æŸ¥é¡¹ç›®å®Œæ•´æ€§
```bash
# ç¡®ä¿é¡¹ç›®æ–‡ä»¶å®Œæ•´
ls -la docker-compose.yml
ls -la Dockerfile.*
ls -la requirements*.txt
```

### 2. æ¸…ç†æ„å»ºç¼“å­˜
```bash
# æ¸…ç†Dockerç¼“å­˜
docker system prune -a

# æ¸…ç†Pythonç¼“å­˜
pip cache purge

# æ¸…ç†Node.jsç¼“å­˜
npm cache clean --force
```

### 3. æ›´æ–°ä¾èµ–
```bash
# æ›´æ–°Pythonä¾èµ–
pip freeze > requirements.txt

# æ›´æ–°Node.jsä¾èµ–
cd yolo-client && npm update
```

## ğŸ¯ éƒ¨ç½²ç¯å¢ƒè¦æ±‚

### æœ€ä½é…ç½®
- **CPU**: 2æ ¸å¿ƒ
- **å†…å­˜**: 4GB
- **ç£ç›˜**: 10GB å¯ç”¨ç©ºé—´
- **ç³»ç»Ÿ**: Linux/Windows/macOS

### æ¨èé…ç½®
- **CPU**: 4æ ¸å¿ƒ+
- **å†…å­˜**: 8GB+
- **ç£ç›˜**: 20GB+ SSD
- **ç³»ç»Ÿ**: Ubuntu 20.04+ / CentOS 8+

## ğŸ” å¸¸è§é—®é¢˜

### Q1: åˆ¶ä½œè¿‡ç¨‹ä¸­Docker buildå¤±è´¥ï¼Ÿ
**A**: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œæ¸…ç†Dockerç¼“å­˜åé‡è¯•
```bash
docker system prune -a
docker-compose build --no-cache
```

### Q2: ç¦»çº¿åŒ…å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ
**A**: é€‰æ‹©æ–¹æ¡ˆäºŒæˆ–ä¼˜åŒ–é•œåƒ
- ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒä½“ç§¯
- åˆ é™¤ä¸å¿…è¦çš„ä¾èµ–åŒ…
- ä½¿ç”¨alpineåŸºç¡€é•œåƒ

### Q3: å®‰è£…æ—¶ç«¯å£è¢«å ç”¨ï¼Ÿ
**A**: ä¿®æ”¹docker-compose.ymlç«¯å£æ˜ å°„
```yaml
ports:
  - "8080:80"  # å‰ç«¯ç«¯å£
  - "8001:8000"  # APIç«¯å£
```

### Q4: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
**A**: ç­‰å¾…æ•°æ®åº“å®Œå…¨å¯åŠ¨
```bash
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker-compose logs postgres

# é‡å¯æ•°æ®åº“æœåŠ¡
docker-compose restart postgres
```

### Q5: Windowså®‰è£…æ—¶å‡ºç°ä¸­æ–‡ä¹±ç ï¼Ÿ
**A**: ä¸­æ–‡ç¼–ç é—®é¢˜ï¼Œä½¿ç”¨ä¿®å¤è„šæœ¬
```batch
# è¿è¡Œä¿®å¤è„šæœ¬
fix_offline_package.bat

# æˆ–è€…æ‰‹åŠ¨ä¿®å¤
chcp 65001
install_fixed.bat
```

### Q6: Dockeré•œåƒåç§°ä¸åŒ¹é…é”™è¯¯ï¼Ÿ
**A**: ä½¿ç”¨æ­£ç¡®çš„é•œåƒåç§°ï¼Œç¡®ä¿docker-compose.ymlä½¿ç”¨imageè€Œä¸æ˜¯build
```yaml
services:
  data-server:
    image: yolo-demo-data-server:latest  # ä½¿ç”¨é•œåƒ
    # build:  # æ³¨é‡Šæ‰æ„å»ºé…ç½®
    #   context: .
    #   dockerfile: Dockerfile.data-server
```

### Q7: PIL/Pillowæ¨¡å—å¯¼å…¥é”™è¯¯ï¼Ÿ
**A**: ä¾èµ–æ–‡ä»¶ä¸­PILåŒ…åè¿‡æ—¶ï¼Œéœ€è¦ä½¿ç”¨Pillow
```bash
# é”™è¯¯ä¿¡æ¯
ModuleNotFoundError: No module named 'PIL'

# è¿è¡Œä¿®å¤è„šæœ¬
fix_pillow_dependency.bat

# æˆ–æ‰‹åŠ¨ä¿®å¤
# 1. ä¿®æ”¹requirements.data-server.txt: PIL â†’ Pillow==10.0.0
# 2. é‡æ–°æ„å»ºé•œåƒ: docker build --no-cache -f Dockerfile.data-server -t yolo-demo-data-server .
```

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### åˆ¶ä½œå‰æ£€æŸ¥
- [ ] Dockerç¯å¢ƒæ­£å¸¸
- [ ] é¡¹ç›®ä»£ç å®Œæ•´
- [ ] ä¾èµ–æ–‡ä»¶æœ€æ–°
- [ ] è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´

### åˆ¶ä½œåæ£€æŸ¥
- [ ] æ‰€æœ‰é•œåƒä¿å­˜æˆåŠŸ
- [ ] é…ç½®æ–‡ä»¶å¤åˆ¶å®Œæ•´
- [ ] å®‰è£…è„šæœ¬å¯æ‰§è¡Œ
- [ ] å‹ç¼©åŒ…å¤§å°åˆç†

### éƒ¨ç½²å‰æ£€æŸ¥
- [ ] ç›®æ ‡ç¯å¢ƒDockerå¯ç”¨
- [ ] ç«¯å£æ²¡æœ‰å†²çª
- [ ] ç³»ç»Ÿèµ„æºå……è¶³
- [ ] æƒé™é…ç½®æ­£ç¡®

## ğŸ‰ æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬ç®¡ç†
```bash
# ç»™å®‰è£…åŒ…åŠ ä¸Šç‰ˆæœ¬æ ‡ç­¾
PACKAGE_VERSION="v1.0.0_$(date +%Y%m%d)"
```

### 2. å‹ç¼©ä¼˜åŒ–
```bash
# ä½¿ç”¨æ›´å¥½çš„å‹ç¼©ç®—æ³•
tar -czf package.tar.gz --exclude='*.log' --exclude='node_modules' .
```

### 3. æ‰¹é‡éƒ¨ç½²
```bash
# åˆ›å»ºæ‰¹é‡éƒ¨ç½²è„šæœ¬
for server in server1 server2 server3; do
    scp package.tar.gz $server:/tmp/
    ssh $server "cd /tmp && tar -xzf package.tar.gz && ./install_all.sh"
done
```

### 4. ç›‘æ§è„šæœ¬
```bash
# æ·»åŠ å¥åº·æ£€æŸ¥
curl -f http://localhost/health || echo "Service down"
```

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨åˆ¶ä½œæˆ–ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**: `docker-compose logs -f`
2. **æ£€æŸ¥çŠ¶æ€**: `docker-compose ps`
3. **é‡ç½®ç¯å¢ƒ**: `docker-compose down -v && docker system prune -a`
4. **è”ç³»æŠ€æœ¯æ”¯æŒ**: æä¾›è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œç¯å¢ƒä¿¡æ¯

---

ğŸ’¡ **æç¤º**: å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒä¸­å…ˆéªŒè¯ç¦»çº¿åŒ…çš„å®Œæ•´æ€§ï¼Œç¡®è®¤æ— è¯¯åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ 